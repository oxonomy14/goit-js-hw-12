{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/js/loader.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('#search-form'),\n  searchText: document.querySelector('.search-form-input'),\n  btnSearch: document.querySelector('.search-btn'),\n  imageList: document.querySelector('.image-search-list'),\n  btnLoadMore: document.querySelector('.btn-loadmore'),\n  btnLoaderBox: document.querySelector('.btn-loader-box'),\n  txtLoaderMore: document.querySelector('.btn-loader-box-txt'),\n};\n","import { refs } from './refs';\n//import { galleryBox } from '../main';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderSearchImages(images) {\n  const markup = images\n    .map(image => {\n      return `<li class=\"image-search-item\" id=\"gallery-item\">\n              <div class=\"image-search-box\">\n               <a \n                href=\"${image.largeImageURL}\">\n                <img\n                  class=\"image-search-img\"\n                  src=\"${image.webformatURL}\"\n                  alt=\"${image.tags}\"\n                  title=\"${image.tags}\"\n                />\n                </a>\n                <div class=\"image-search-descr\">\n                  <ul class=\"image-search-descr-list\">\n                    <li class=\"image-search-descr-item\">\n                      <h3 class=\"image-search-descr-subtitle\">Likes</h3>\n                      <p class=\"image-search-descr-txt\">${image.likes}</p>\n                    </li>\n                    <li class=\"image-search-descr-item\">\n                      <h3 class=\"image-search-descr-subtitle\">Views</h3>\n                      <p class=\"image-search-descr-txt\">${image.views}</p>\n                    </li>\n                    <li class=\"image-search-descr-item\">\n                      <h3 class=\"image-search-descr-subtitle\">Comments</h3>\n                      <p class=\"image-search-descr-txt\">${image.comments}</p>\n                    </li>\n                    <li class=\"image-search-descr-item\">\n                      <h3 class=\"image-search-descr-subtitle\">Downloads</h3>\n                      <p class=\"image-search-descr-txt\">${image.downloads}</p>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </li>`;\n    })\n    .join('');\n\n  refs.imageList.insertAdjacentHTML('beforeend', markup);\n\n  // Ініціалізація бібліотеки SimpleLightbox\n  let galleryBox = new SimpleLightbox('.image-search-list a', {\n    captionsData: 'alt', // Витягує підписи із атрибута alt\n    captionDelay: 250, // Затримка появи підпису (в мс)\n  });\n\n  // Оновлення SimpleLightbox, для перезавантаження списку елементів\n  galleryBox.refresh();\n}\n","// Функкції показу/ховання лоадера\nexport function showLoader() {\n  document.querySelector('#image-search').classList.add('hidden'); // Ховаємо контент\n  document.querySelector('.loader-container').style.display = 'flex'; // Показуєм лоадер\n}\n\nexport function hideLoader() {\n  document.querySelector('#image-search').classList.remove('hidden'); // Показуєм контент\n  document.querySelector('.loader-container').style.display = 'none'; // Ховаємо лоадер\n}\n","// Your API key: 48017224-d7e819cca6d5953c75e1fff02\nimport { refs } from './refs';\nimport axios from 'axios';\nimport { renderSearchImages } from './render-functions';\nimport { showLoader, hideLoader } from './loader'; // Импорт функций лоадера\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function queryPixabay(query, page, perPage) {\n  const API_KEY = '48017224-d7e819cca6d5953c75e1fff02';\n\n  axios.defaults.baseURL = 'https://pixabay.com';\n\n  const searchParams = new URLSearchParams({\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  });\n\n  // showLoader(); // перед завантаженням даних з API-сервера показуємо лоадер\n\n  await axios\n    //  .get(`/api/?key=48017224-d7e819cca6d5953c75e1fff02&${searchParams}`)\n    .get(`/api/?key=${API_KEY}&${searchParams}`)\n    .then(serverResponse => {\n      // console.log(serverResponse.data);\n      //console.log(serverResponse.data.total);\n\n      const totalImages = serverResponse.data.total;\n      // console.log('Всього зображень:', totalImages);\n\n      const totalPages = Math.ceil(totalImages / perPage);\n      //console.log('Всього колекцій:', totalPages);\n\n      if (Number.parseInt(serverResponse.data.total) > 0) {\n        const images = serverResponse.data.hits;\n        //console.log(images);\n        //console.log(images[0].webformatURL);\n        renderSearchImages(images); //створюємо розмітку і прорисовуємо на веб-сторінці\n        // console.log('Колекція за номером:', page);\n        page += 1; // Збільшуємо сторінку колекції зображень з кроком +1\n        //refs.btnLoadMore.style.display = page < totalPages ? 'block' : 'none';\n        if (page < totalPages) {\n          refs.btnLoadMore.style.display = 'block';\n          //console.log('Колекція за номером:', page);\n        } else {\n          refs.btnLoadMore.style.display = 'none';\n          //  console.log('Зображень більше немає');\n          iziToast.error({\n            title: 'Images no have any more',\n            message: `❌ We're sorry, but you've reached the end of search results.`,\n            position: 'topCenter',\n            timeout: 5000,\n          });\n          return;\n        }\n      } else {\n        iziToast.error({\n          title: 'Помилка',\n          message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n          position: 'topCenter',\n          timeout: 5000,\n        });\n        return;\n      }\n    })\n    //.catch(error => console.error('Помилка завантаження:', error))\n    .catch(error =>\n      iziToast.error({\n        title: 'Помилка',\n        message: `❌ Виникла помилка завантаження на стороні сервера Pixabay. Спробуйте іншим разом!`,\n        position: 'topCenter',\n        timeout: 5000,\n      })\n    )\n    .finally(() => {\n      hideLoader(); // Ховаємо лоадер в будь-якому випадку  (успіх або помилка)\n    });\n}\n","import { queryPixabay } from './js/pixabay-api';\nimport { refs } from './js/refs';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet query = ''; // Змінна для збереження пошукового запиту\nlet page = 1; // Починаємо з першої сторінки\nconst perPage = 40; // Кількість зображень на сторінку\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onBtnClick);\n\nrefs.btnLoadMore.style.display = 'none'; // Сховати кнопку перед запитом\nrefs.txtLoaderMore.style.display = 'none'; // Показати індикатор завантаження\n\nasync function onFormSubmit(evt) {\n  evt.preventDefault();\n\n  //console.log('Лог№1 - Кнопка \"Пошук\" натискається');\n\n  refs.imageList.innerHTML = ''; // Перед пошуком за новим ключовим словом повністю очищаємо попередній вміст галереї\n  page = 1; // Скидаємо номер сторінки\n  query = evt.currentTarget.elements.query.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Помилка',\n      message: `❌ Введіть в поле пошуку пошукову фразу`,\n      position: 'topCenter',\n      timeout: 2500,\n    });\n    //window.alert('Введіть в поле пошуку пошукову фразу');\n    // console.log('Введіть в поле пошуку пошукову фразу');\n    return;\n  } else {\n    // console.log('Пошуковий запит:', query);\n\n    try {\n      const images = await queryPixabay(query, page, perPage);\n      // renderSearchImages(images); // запит до сервера Pixabay за пошуковою фразою\n    } catch (error) {\n      console.log(error);\n    } finally {\n      //toggleLoadMore(true); // Сховати індикатор завантаження\n      refs.txtLoaderMore.style.display = 'none';\n    }\n  }\n  refs.form.reset();\n}\n\n// -----------  Натискання кнопки Load More  -------------------\n\n// ---- Завантаження наступної сторінки ----\nasync function onBtnClick() {\n  page += 1; // Збільшуємо сторінку\n\n  try {\n    refs.btnLoadMore.style.display = 'none';\n    refs.txtLoaderMore.style.display = 'block';\n\n    const images = await queryPixabay(query, page, perPage);\n\n    smoothScroll(); // Скрол після рендеру\n  } catch (error) {\n    console.error(error);\n  } finally {\n    refs.txtLoaderMore.style.display = 'none';\n    refs.btnLoadMore.style.display = 'block';\n  }\n}\n\nfunction smoothScroll() {\n  setTimeout(() => {\n    if (!refs.imageList) return;\n\n    const galleryItem = document.querySelectorAll('.image-search-list li'); // Всі елементи галереї\n    if (galleryItem.length === 0) {\n      // console.log('Галерея порожня або ще не завантажилася');\n      return;\n    }\n    //console.log('Елемент', galleryItem[0]);\n    const cardHeight = galleryItem[0].getBoundingClientRect().height; // Висота першого елемента\n    // console.log('Висота', cardHeight);\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' }); // Прокручуємо\n  }, 500); // Чекаємо 500 мс, щоб DOM оновився\n}\n"],"names":["refs","renderSearchImages","images","markup","image","SimpleLightbox","hideLoader","queryPixabay","query","page","perPage","API_KEY","axios","searchParams","serverResponse","totalImages","totalPages","iziToast","error","onFormSubmit","onBtnClick","evt","smoothScroll","galleryItem","cardHeight"],"mappings":"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"}